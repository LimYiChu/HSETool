{% extends "userT/base3.html"%}
{%load crispy_forms_tags %}

{% block maindashboard%}
<!--hidden for styling-->
<!--
<h1>Your Actions</h1>
-->
<head>
    
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(starter); //cant call drawchart with paarmeters, need the parameters to make the code effcient
    
        function starter(){
            
            
            {% for chart in content%}
             
                drawChart({{chart|safe}} , {{ forloop.counter }},'{{chart.0}}',false);
            
            {%endfor%}

            {% for appchart in appfinalist%}
             
            drawChart({{appchart|safe}} , {{ forloop.counter }},'{{appchart.0}}',true);
        
            {%endfor%}
        }
      function drawChart(values,index,chartTitle,approver) {
        
        firstindex = chartTitle.lastIndexOf("///")+3
        
        lastindex = chartTitle.lastIndexOf(":::")
        var newtitle = chartTitle.substring(firstindex,lastindex );
       
        var data = google.visualization.arrayToDataTable(values);

        var options = {
          title: newtitle,
          is3D : true,
          titleTextStyle: {
            color: 'Black',    // any HTML string color ('red', '#cc00cc')
            fontName: 'Helvetica', // i.e. 'Times New Roman'
            fontSize: 20, // 12, 18 whatever you want (don't specify px)
            bold: false,    // true or false
            italic: false   // true of false
                        },
            height: 500,
            width: 700,
            chartArea:{left:20,top:100,width:'80%',height:'80%'},
            legend : {position: 'side', textStyle: {color: 'black', fontSize: 16}} //have to add this in otherwise charts seem small...like your dick
        };
        
        if (approver==false){
        var strpie = "piechart";
        var finalpie = strpie.concat(index);
        var chart = new google.visualization.PieChart(document.getElementById(finalpie));
        chart.draw(data, options);
        }

        if (approver==true){
            var strpie = "apppiechart";
            var finalpie = strpie.concat(index);
            var chart = new google.visualization.PieChart(document.getElementById(finalpie));
            chart.draw(data, options);
            }
        //var chart2 = new google.visualization.PieChart(document.getElementById('piechart2'));
        
    //chart2.draw(data, options);
       
      }
     
    </script>
  </head>
<div class="row">
<!--breadcrumbs - needs to be automated.-->
<div class="row" >
    <nav>
      <ol class="breadcrumb" style="bg-light;">
        <li class="breadcrumb-item-active">
          <a aria-current="page" style="font-size:x-large">Dashboard</a>
        </li>
       
      </ol>
    </nav>
<div class="col-md-12 center">
<div class="card">
    <div class="card-header" style="font-size: large;">
     Your Actions
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-12" >
            <div class="card">
                    <div class="card-header" style="font-size: large" >

                    <a href="/ActioneeList" >
                        Actionee Action           
                       </a>
                    
                    </div>
                <div >
                
                    <div class="card-body " > <!--the float could be the cuase of the image changing position-->
                        <a href="/ActioneeList"> 
                        <div style="float:left;" id="piechart1" ></div> <!--DONT ADD WIDTH TO ELEMENT, resize from google chart-->
                        <div style="float:left;" id="piechart2" ></div>
                        <div style="float:left;" id="piechart3" ></div>
                        <div style="float:left;" id="piechart4" ></div>
                        <div style="float:left;" id="piechart5" ></div>
                        <div style="float:left;" id="piechart6" ></div>
                        <div style="float:left;" id="piechart7" ></div>
                        <div style="float:left;" id="piechart8" ></div>
                        <div style="float:left;" id="piechart9" ></div>
                    </div>
                
                </div>
            <!--<a class="h5" href="/ActioneeList">Go to All Your Actions</a>--><!--Not used-->
            </div>                      
            </div>
        </div> 

        <div class="row">         
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header" style="font-size: large;">
                            <a href="/ApproverList">
                        Approver Actions
                            </a>
                    </div>
                    <div class="card-body " > 
                       
                        <div style="float:left;" id="apppiechart1" ></div> <!--DONT ADD WIDTH TO ELEMENT, resize from google chart-->
                        <div style="float:left;" id="apppiechart2" ></div>
                        <div style="float:left;" id="apppiechart3" ></div>
                        <div style="float:left;" id="apppiechart4" ></div>
                        <div style="float:left;" id="apppiechart5" ></div>
                        <div style="float:left;" id="apppiechart6" ></div>
                        <div style="float:left;" id="apppiechart7" ></div>
                        <div style="float:left;" id="apppiechart8" ></div>
                        <div style="float:left;" id="apppiechart9" ></div>
            </div>
            <!--<a class="h5" href="/ApproverList">Go to Your Pending Approvals</a>--> <!--Not Used-->
            </div>
            </div>
        </div>

    </div>
</div>
</div>
</div>
</div>

<br>

{%endblock%}



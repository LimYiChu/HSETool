{% extends "userT/base3.html"%}
{%load crispy_forms_tags %}

{% block maindashboard%}
<!--hidden for styling-->
<!--
<h1>Your Actions</h1>
-->
<head>
    
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(starter); //cant call drawchart with paarmeters, need the parameters to make the code effcient
    
        function starter(){
            
            
            {% for chart in actioneefinallist%}
            {%if chart %}
                drawChart({{chart|safe}} , {{ forloop.counter }},'{{chart.0}}',false);
                {%endif%}
            {%endfor%}

            {% for appchart in apprfinalist%}
             {%if appchart %} //cant work with !=[] just wants to state that it has data then trigger draw chart otherwise its just ugly red errors on screen
            drawChart({{appchart|safe}} , {{ forloop.counter }},'{{appchart.0}}',true);
            {%endif%}
            {%endfor%}
        }
      function drawChart(values,index,chartTitle,approver) {
        
        firstindex = chartTitle.lastIndexOf("///")+3 //Doing this because it passes soem wird HTML together with the string &#27 or some other stuff
        
        lastindex = chartTitle.lastIndexOf(":::")
        var newtitle = chartTitle.substring(firstindex,lastindex );
       
        var data = google.visualization.arrayToDataTable(values);

        var options = {
          title: newtitle,
          is3D : true,

          pieSliceText : 'value',
            pieSliceTextStyle: {
              bold: true,
              fontSize: 25,
              color: 'black'
          },

          titleTextStyle: {
            color: 'Black',    // any HTML string color ('red', '#cc00cc')
            fontName: 'Helvetica', // i.e. 'Times New Roman'
            fontSize: 20, // 12, 18 whatever you want (don't specify px)
            bold: true,    // true or false
            italic: false   // true of false
                        },
            height: 500,
            width: 700,
            chartArea:{left:20,top:100,width:'100%',height:'100%'},
         
            legend : {position: 'labeled', textStyle: {color: 'black', fontSize: 20}} //have to add this in otherwise charts seem small...like your dick
        };
        
        if (approver==false){
        var strpie = "piechart";
        var finalpie = strpie.concat(index);
        var chart = new google.visualization.PieChart(document.getElementById(finalpie));
        chart.draw(data, options);
        }

        if (approver==true){
            var strpie = "apppiechart";
            var finalpie = strpie.concat(index);
            var chart = new google.visualization.PieChart(document.getElementById(finalpie));
            chart.draw(data, options);
            }
        //var chart2 = new google.visualization.PieChart(document.getElementById('piechart2'));
        
    //chart2.draw(data, options);
       
      }
     
    </script>
  </head>

  <!--breadcrumbs-->
  <h4><b>
    {%include "userT/inclbcmaindashboard.html"%}
</b></h4>
<br> 
      


<div class="col-md-12 center" >
<div class="card" style="width: auto; overflow: scroll;" >
    
    <h5>
    
        <div class="row">
            <div class="col-md-12" >
            <div class="card">
                    <div class="card-header" style="background-color: #ffffff;"  >

                    <a href="/ActioneeList" >Actionee Action   - You have a total of {{totalactioneeaction}} actions in your que.</a>
                    
                    </div>
                <div >
                
                    <div class="card-body " > 
                        <a href="/ActioneeList"> 
                        <div style="float:left;" id="piechart1" ></div> <!--DONT ADD WIDTH TO ELEMENT, resize from google chart-->
                        <div style="float:left;" id="piechart2" ></div>
                        <div style="float:left;" id="piechart3" ></div>
                        <div style="float:left;" id="piechart4" ></div>
                        <div style="float:left;" id="piechart5" ></div>
                        <div style="float:left;" id="piechart6" ></div>
                        <div style="float:left;" id="piechart7" ></div>
                        <div style="float:left;" id="piechart8" ></div>
                        <div style="float:left;" id="piechart9" ></div>
                    </div>
                
                </div>
            <!--<a class="h5" href="/ActioneeList">Go to All Your Actions</a>--><!--Not used-->
            </div>                      
            </div>
        </div> 
        
        <div class="row">         
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header" style="background-color: #ffffff;">
                            <a href="/ApproverList">
                        Approver Actions - You have a total of {{totalapproveraction}} actions in your que. 
                            </a>
                    </div>
                    <div class="card-body " > 
                      <a href="/ApproverList"> 
                        <div style="float:left;" id="apppiechart1" ></div> <!--DONT ADD WIDTH TO ELEMENT, resize from google chart-->
                        <div style="float:left;" id="apppiechart2" ></div>
                        <div style="float:left;" id="apppiechart3" ></div>
                        <div style="float:left;" id="apppiechart4" ></div>
                        <div style="float:left;" id="apppiechart5" ></div>
                        <div style="float:left;" id="apppiechart6" ></div>
                        <div style="float:left;" id="apppiechart7" ></div>
                        <div style="float:left;" id="apppiechart8" ></div>
                        <div style="float:left;" id="apppiechart9" ></div>
            </div>
            <!--<a class="h5" href="/ApproverList">Go to Your Pending Approvals</a>--> <!--Not Used-->
            </div>
            </div>
        </div>

    
</h5>
</div>
</div>
</div>
</div>

<br>

{%endblock%}


